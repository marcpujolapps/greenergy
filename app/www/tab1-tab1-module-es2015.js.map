{"version":3,"sources":["./src/app/tab1/tab1.page.html","./src/app/tab1/tab1-routing.module.ts","./src/app/tab1/tab1.module.ts","./src/app/tab1/tab1.page.scss","./src/app/tab1/tab1.page.ts"],"names":[],"mappings":"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","file":"tab1-tab1-module-es2015.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-title>\\n      Consumo\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">Consumo</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n  <ion-card>\\n    <ion-card-header>\\n      <ion-card-subtitle>{{consumption.from | date:'MMM yyyy'}} - {{consumption.to | date:'MMM yyyy'}}</ion-card-subtitle>\\n      <ion-card-title>Resumen</ion-card-title>\\n    </ion-card-header>\\n\\n    <ion-card-content>\\n      <ion-text>Consumo medio: <b>{{consumption.summary.average_consumption}} kWh</b></ion-text><br><br>\\n\\n      <ion-text>Consumo total: <b>{{consumption.summary.consumption}} kWh</b></ion-text><br>\\n      <ion-text *ngFor=\\\"let period of consumption.periods\\\">{{period.period.price_type_name}}: <b>{{period.period.consumption}} kWh</b><br></ion-text>\\n\\n      <canvas #anuallyChart></canvas>\\n    </ion-card-content>\\n  </ion-card>\\n\\n  <ion-slides pager=\\\"true\\\">\\n    <ion-slide *ngFor=\\\"let month of months\\\">\\n      <div style=\\\"text-align:left;width:100vw\\\">\\n        <ion-card>\\n          <ion-card-header>\\n            <ion-card-title>{{month.friendly_month_name}}</ion-card-title>\\n          </ion-card-header>\\n\\n          <ion-card-content>\\n            <ion-text>Punta: <b>{{month.value.consum}} kWh</b></ion-text><br>\\n            <ion-text>Valle: <b>{{month.value | json}} kWh</b></ion-text>\\n          </ion-card-content>\\n        </ion-card>\\n      </div>\\n    </ion-slide>\\n  </ion-slides>\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    Tab1PageRoutingModule\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3RhYjEvdGFiMS5wYWdlLnNjc3MifQ== */\";","import { Component, ChangeDetectorRef, ViewChild } from \"@angular/core\";\nimport { HTTP } from \"@ionic-native/http/ngx\";\nimport { Chart } from \"chart.js\";\n\n@Component({\n  selector: \"app-tab1\",\n  templateUrl: \"tab1.page.html\",\n  styleUrls: [\"tab1.page.scss\"],\n})\nexport class Tab1Page {\n  @ViewChild(\"anuallyChart\") barChart;\n  bars: any;\n  colorArray: any;\n  consumption: any = {\n    periods: [\n      {\n        period: {\n          predicted_consumption: 63.661,\n          predicted_generation: 0,\n          price_type: \"normal\",\n          price_type_name: \"Punta\",\n          period_name: \"P1\",\n          consumption: 63.661,\n          generation: 0,\n        },\n        months: [\n          {\n            month: \"2020-01\",\n            month_label: \"ENE \\n\\r 2020\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"enero 2020\",\n          },\n          {\n            month: \"2020-02\",\n            month_label: \"FEB\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"febrero 2020\",\n          },\n          {\n            month: \"2020-03\",\n            month_label: \"MAR\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"marzo 2020\",\n          },\n          {\n            month: \"2020-04\",\n            month_label: \"ABR\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"abril 2020\",\n          },\n          {\n            month: \"2020-05\",\n            month_label: \"MAY\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"mayo 2020\",\n          },\n          {\n            month: \"2020-06\",\n            month_label: \"JUN\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"junio 2020\",\n          },\n          {\n            month: \"2020-07\",\n            month_label: \"JUL\",\n            value: {\n              consumption: 63.661,\n              predicted_consumption: 63.661,\n              generation: 0,\n              predicted_generation: 0,\n              display: \"provisional\",\n            },\n            end_date: \"2020-07-31\",\n            friendly_month_name: \"julio 2020\",\n          },\n          {\n            month: \"2020-08\",\n            month_label: \"AGO\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"agosto 2020\",\n          },\n          {\n            month: \"2020-09\",\n            month_label: \"SEP\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"septiembre 2020\",\n          },\n          {\n            month: \"2020-10\",\n            month_label: \"OCT\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"octubre 2020\",\n          },\n          {\n            month: \"2020-11\",\n            month_label: \"NOV\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"noviembre 2020\",\n          },\n          {\n            month: \"2020-12\",\n            month_label: \"DIC\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"diciembre 2020\",\n          },\n        ],\n      },\n      {\n        period: {\n          predicted_consumption: 86.18,\n          predicted_generation: 0,\n          price_type: \"reduced\",\n          price_type_name: \"Valle\",\n          period_name: \"P2\",\n          consumption: 86.18,\n          generation: 0,\n        },\n        months: [\n          {\n            month: \"2020-01\",\n            month_label: \"ENE \\n\\r 2020\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"enero 2020\",\n          },\n          {\n            month: \"2020-02\",\n            month_label: \"FEB\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"febrero 2020\",\n          },\n          {\n            month: \"2020-03\",\n            month_label: \"MAR\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"marzo 2020\",\n          },\n          {\n            month: \"2020-04\",\n            month_label: \"ABR\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"abril 2020\",\n          },\n          {\n            month: \"2020-05\",\n            month_label: \"MAY\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"mayo 2020\",\n          },\n          {\n            month: \"2020-06\",\n            month_label: \"JUN\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"junio 2020\",\n          },\n          {\n            month: \"2020-07\",\n            month_label: \"JUL\",\n            value: {\n              consumption: 86.18,\n              predicted_consumption: 86.18,\n              generation: 0,\n              predicted_generation: 0,\n              display: \"provisional\",\n            },\n            end_date: \"2020-07-31\",\n            friendly_month_name: \"julio 2020\",\n          },\n          {\n            month: \"2020-08\",\n            month_label: \"AGO\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"agosto 2020\",\n          },\n          {\n            month: \"2020-09\",\n            month_label: \"SEP\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"septiembre 2020\",\n          },\n          {\n            month: \"2020-10\",\n            month_label: \"OCT\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"octubre 2020\",\n          },\n          {\n            month: \"2020-11\",\n            month_label: \"NOV\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"noviembre 2020\",\n          },\n          {\n            month: \"2020-12\",\n            month_label: \"DIC\",\n            value: {\n              predicted_consumption: 0,\n              predicted_generation: 0,\n              display: \"no_data\",\n            },\n            friendly_month_name: \"diciembre 2020\",\n          },\n        ],\n      },\n    ],\n    forecast: {\n      predicted_consumption: 149.841,\n      predicted_generation: 0,\n    },\n    from: \"2020-01\",\n    to: \"2020-12\",\n    total_months: 12,\n    summary: {\n      consumption: 149.841,\n      average_consumption: 12.48675,\n      generation: 0,\n      average_generation: 0,\n    },\n  };\n  constructor(public http: HTTP, private ref: ChangeDetectorRef) {\n    this.init();\n  }\n\n  async init() {\n    await this.getConsumption();\n    this.createBarChart();\n  }\n\n  getConsumption() {\n    return new Promise(async (resolve, reject) => {\n      if (this.consumption) {\n        resolve(this.consumption);\n      } else {\n        const data = await this.http\n          .get(\n            \"https://dashboard-api.lucera.es/v1/contracts/electricity/61837/consumption/months?from=2020-01&to=2020-12\",\n            {},\n            {}\n          )\n          .catch((err) => {\n            console.log(err);\n            reject(err);\n          });\n        this.consumption = data;\n        this.ref.detectChanges();\n        resolve(data);\n      }\n    });\n  }\n\n  createBarChart() {\n    let ctx = this.barChart.nativeElement;\n    ctx.height = 200;\n    this.bars = new Chart(this.barChart.nativeElement, {\n      type: \"bar\",\n      data: {\n        labels: this.consumption.periods[0].months.map(\n          (month) => month.month_label\n        ),\n        datasets: this.consumption.periods\n          .map((period) => ({\n            stack: true,\n            label: period.period.price_type_name,\n            data: period.months.map((month) => month.value.consumption || 0),\n            backgroundColor:\n              period.period.price_type_name === \"Punta\"\n                ? \"rgb(247, 105, 69)\"\n                : \"rgb(35, 235, 88)\",\n          })),\n      },\n      options: {\n        scales: {\n          xAxes: {\n            stacked: true,\n          },\n          yAxes: [\n            {\n              ticks: {\n                beginAtZero: true,\n              },\n            },\n          ],\n        },\n      },\n    });\n  }\n}\n"],"sourceRoot":"webpack:///"}